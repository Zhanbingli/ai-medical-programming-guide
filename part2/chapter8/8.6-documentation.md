# 8.6 文档生成:AI自动写注释

## 为什么需要文档?

**一个月后的你 = 陌生人**

没有文档的代码:
```python
def calc(a,b,c):
    return a/(b**2) if c else a*b
```

你还记得这是干嘛的吗? 🤔

## AI生成文档的优势

✅ 快速生成标准格式docstring
✅ 自动识别参数和返回值
✅ 生成使用示例
✅ 多语言文档(中英文)

## 使用AI添加文档

### 方法1: 直接请求

**Prompt**:
```
为这个函数添加详细的docstring,包括:
- 功能描述
- 参数说明
- 返回值
- 使用示例
- 异常情况

def calculate_bmi(weight, height):
    return weight / (height ** 2)
```

**AI生成**:
```python
def calculate_bmi(weight, height):
    """
    计算身体质量指数(BMI)

    BMI = 体重(kg) / 身高(m)²

    Args:
        weight (float): 体重,单位为千克(kg)
        height (float): 身高,单位为米(m)

    Returns:
        float: BMI值

    Raises:
        ValueError: 当体重或身高小于等于0时
        TypeError: 当参数不是数字类型时

    Examples:
        >>> calculate_bmi(70, 1.75)
        22.857142857142858

        >>> calculate_bmi(65, 1.68)
        23.030045351473923

    Note:
        - BMI < 18.5: 体重过轻
        - 18.5 ≤ BMI < 24: 正常
        - 24 ≤ BMI < 28: 超重
        - BMI ≥ 28: 肥胖
    """
    if weight <= 0 or height <= 0:
        raise ValueError("体重和身高必须大于0")

    return weight / (height ** 2)
```

### 方法2: 生成README

**Prompt**:
```
为我的项目生成README.md:

项目: 患者随访提醒工具
功能: 读取Excel,筛选需要随访的患者,发送提醒
技术栈: Python, pandas, openpyxl

请包括:
- 项目简介
- 安装方法
- 使用说明
- 示例
```

**AI生成README.md**:
```markdown
# 患者随访提醒工具

自动化患者随访管理,及时提醒需要回访的患者。

## 功能特性

- 📊 读取Excel患者数据
- 🔍 智能筛选近期需随访患者
- 📱 自动发送提醒通知
- 📋 生成随访记录

## 安装

### 前置要求

- Python 3.8+
- pip

### 安装步骤

```bash
# 克隆仓库
git clone https://github.com/yourname/followup-tool.git
cd followup-tool

# 安装依赖
pip install -r requirements.txt
```

## 使用方法

### 1. 准备数据

创建Excel文件 `patients.xlsx`,包含以下列:
- patient_id: 患者ID
- name: 姓名
- phone: 手机号
- followup_date: 随访日期

### 2. 运行程序

```bash
python followup.py patients.xlsx
```

### 3. 查看结果

程序会生成:
- `reminders.xlsx`: 需要提醒的患者名单
- `log.txt`: 运行日志

## 示例

```python
from followup import check_followups

# 检查7天内需要随访的患者
upcoming = check_followups('patients.xlsx', days=7)
print(f"找到{len(upcoming)}位需要随访的患者")
```

## 许可证

MIT License
```

## 实战技巧

### 技巧1: 中英文混合文档

```
生成中文注释,但参数名用英文
```

### 技巧2: 生成项目结构说明

```
解释这个项目的文件结构,每个文件的作用
```

### 技巧3: 生成API文档

```
为这些函数生成API文档,Markdown格式
```

## 检查清单

- [ ] 所有函数都有docstring
- [ ] 参数和返回值说明清楚
- [ ] 有使用示例
- [ ] README包含安装和使用说明
- [ ] 重要的逻辑有注释

## 下一步

[8.7 完整案例:从需求到部署](8.7-complete-case.md)

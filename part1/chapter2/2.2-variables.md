# 2.2 变量：存储患者信息

## 医学类比：理解变量

想象你在门诊接诊患者，需要记录信息：

```
患者姓名：张三
年龄：45
性别：男
血压：140/90
```

这些信息需要临时记在某个地方，对吧？在纸质病历时代，你写在病历本上；在电子病历时代，你输入到系统的字段里。

**编程中的变量，就是这些"临时存储信息的地方"**。

## 什么是变量？

### 定义
变量 = 一个带名字的盒子，用来存储数据

### 医学场景示例

```python
# 存储患者基本信息
patient_name = "张三"
age = 45
gender = "男"
systolic_bp = 140
diastolic_bp = 90
has_diabetes = True
```

**翻译成人话**：
- `patient_name` 这个"盒子"里装着 "张三"
- `age` 这个"盒子"里装着数字 45
- `has_diabetes` 这个"盒子"里装着 True（真，表示有糖尿病）

## 为什么需要变量？

### 场景：计算BMI

**不用变量（❌ 不好的方式）**：
```python
print(70 / (1.75 * 1.75))  # 这是谁的BMI？无法理解
```

**使用变量（✅ 好的方式）**：
```python
weight = 70  # 体重（kg）
height = 1.75  # 身高（m）
bmi = weight / (height * height)
print(f"患者BMI: {bmi:.1f}")  # 输出：患者BMI: 22.9
```

### 变量的好处
1. **可读性**：一眼看懂代码在做什么
2. **可复用**：同一个值多次使用
3. **可修改**：只需改一处，全部更新

## 变量命名规则

### ✅ 好的命名（医学场景）
```python
patient_age = 45
blood_glucose = 6.5
creatinine_level = 85
heart_rate = 72
followup_date = "2025-02-15"
```

### ❌ 不好的命名
```python
a = 45  # a是什么？
x = 6.5  # 完全看不懂
data123 = 85  # 没有意义
```

### 命名最佳实践（Python风格）

| 规则 | 说明 | 示例 |
|------|------|------|
| 使用小写字母 | 单词间用下划线分隔 | `patient_name` |
| 见名知义 | 名字要说明变量的含义 | `systolic_bp` 而不是 `sbp` |
| 避免中文 | 虽然Python支持，但不推荐 | `age` 而不是`年龄` |
| 不用保留字 | 不能用Python关键字 | 不能用`if`, `for`, `class`等 |

## 变量的赋值与修改

### 赋值：给变量装入数据
```python
patient_name = "李四"  # 把"李四"装进patient_name这个盒子
```

### 修改：更换盒子里的内容
```python
temperature = 36.5  # 体温正常
print(temperature)  # 输出：36.5

temperature = 38.2  # 发热了，更新体温
print(temperature)  # 输出：38.2
```

### 医学场景：记录血压变化
```python
# 首次测量
systolic_bp = 160
print(f"首次收缩压: {systolic_bp} mmHg")

# 服药后再测
systolic_bp = 135
print(f"服药后收缩压: {systolic_bp} mmHg")

# 计算降压幅度
reduction = 160 - systolic_bp
print(f"降低了: {reduction} mmHg")
```

输出：
```
首次收缩压: 160 mmHg
服药后收缩压: 135 mmHg
降低了: 25 mmHg
```

## 变量的运算

### 数值运算
```python
# 计算肾小球滤过率（简化公式）
serum_creatinine = 88  # μmol/L
age = 45
gfr = 186 * (serum_creatinine / 88.4) ** -1.154 * age ** -0.203
print(f"eGFR: {gfr:.1f} mL/min/1.73m²")
```

### 字符串拼接
```python
first_name = "张"
last_name = "三"
full_name = first_name + last_name
print(full_name)  # 输出：张三

# 生成病历号
patient_id = "MED" + "2025" + "001"
print(patient_id)  # 输出：MED2025001
```

## 实战练习：患者信息管理

### 任务
编写代码记录并处理患者信息：

```python
# 1. 记录患者基本信息
patient_name = "王五"
age = 52
weight = 75  # kg
height = 1.70  # m

# 2. 计算BMI
bmi = weight / (height ** 2)

# 3. 判断BMI分类（先了解思路，具体实现在条件判断章节）
print(f"患者{patient_name}，年龄{age}岁")
print(f"身高{height}m，体重{weight}kg")
print(f"BMI: {bmi:.1f}")

# 4. 记录实验室检查
glucose = 7.2  # mmol/L
hba1c = 6.8  # %

print(f"空腹血糖: {glucose} mmol/L")
print(f"糖化血红蛋白: {hba1c}%")
```

输出：
```
患者王五，年龄52岁
身高1.7m，体重75kg
BMI: 26.0
空腹血糖: 7.2 mmol/L
糖化血红蛋白: 6.8%
```

## 常见错误

### 错误1：使用未定义的变量
```python
print(patient_age)  # ❌ 错误：还没定义就使用
```
**正确做法**：
```python
patient_age = 45  # 先定义
print(patient_age)  # 再使用
```

### 错误2：变量名拼写错误
```python
patient_name = "张三"
print(patinet_name)  # ❌ 拼写错误：patinet vs patient
```

### 错误3：名字太随意
```python
a = 36.5  # ❌ 这是体温？血糖？看不出来
temperature = 36.5  # ✅ 清晰明确
```

## 💡 关键要点

1. **变量是存储数据的容器**，用名字标识
2. **好的变量名 = 自解释的代码**
3. **先定义，后使用**
4. **变量的值可以改变**
5. **选择有意义的名字，尤其在医学场景中**

## 类比总结

| 医学概念 | 编程概念 |
|---------|---------|
| 病历号 | 变量名 |
| 患者信息 | 变量值 |
| 记录信息 | 赋值 |
| 更新信息 | 修改变量 |
| 查阅信息 | 读取变量 |

## 下一步

理解了变量这个"盒子"，接下来我们要学习[数据类型](2.3-data-types.md)——不同类型的"盒子"能装什么样的东西。

---

## 🔨 动手练习

1. 创建变量存储你自己的基本信息（姓名、年龄、身高、体重）
2. 计算你的BMI
3. 尝试修改体重变量，重新计算BMI
4. 思考：如果要记录10个患者的信息，用10组变量可行吗？（提示：下一章会学习更好的方法）

```python
# 在这里练习
# 提示：打开VSCode或Jupyter Notebook，亲自敲一遍代码

```

# 3.3 第一个程序:Hello Medical World

## 编程的第一步

在编程世界,传统是从"Hello World"开始。但我们是医学工作者,让我们从**"Hello Medical World"**开始!

## 运行Python的三种方式

### 方式1: 交互式模式(Python Shell)

#### 启动Python Shell

```bash
# 打开终端/命令提示符,输入:
python
```

**预期输出**:
```python
Python 3.11.7 (main, Dec 15 2023, 12:09:04)
[GCC 11.2.0] on linux
Type "help", "copyright", "credits" or "license" for more information.
>>>
```

`>>>` 是Python提示符,等待你输入代码。

#### 第一行代码

```python
>>> print("Hello, Medical World!")
Hello, Medical World!

>>> print("我是一名医生,正在学习Python!")
我是一名医生,正在学习Python!
```

#### 简单计算

```python
>>> 2 + 2
4

>>> # 计算BMI
>>> weight = 70
>>> height = 1.75
>>> bmi = weight / (height ** 2)
>>> print(f"BMI: {bmi:.2f}")
BMI: 22.86
```

#### 退出Python Shell

```python
>>> exit()
```

或按 `Ctrl + D` (macOS/Linux) 或 `Ctrl + Z` 然后回车(Windows)

**优点**: 快速测试代码
**缺点**: 无法保存,关闭后代码就没了

### 方式2: Jupyter Notebook(推荐)

#### 启动Jupyter

```bash
jupyter notebook
```

#### 创建新笔记本

1. 浏览器打开后,点击右上角 **New** → **Python 3**
2. 会创建一个名为`Untitled.ipynb`的笔记本

#### 编写第一个程序

**Cell 1**:
```python
# 这是我的第一个Python程序
print("Hello, Medical World!")
print("=" * 50)
print("我是一名医生,正在学习Python编程")
print("=" * 50)
```

按 `Shift + Enter` 运行。

**输出**:
```
Hello, Medical World!
==================================================
我是一名医生,正在学习Python编程
==================================================
```

#### 医学场景示例

**Cell 2**:
```python
# 患者基本信息
patient_name = "张三"
age = 45
diagnosis = "2型糖尿病"

# 生成简单病历摘要
print(f"患者姓名: {patient_name}")
print(f"年龄: {age}岁")
print(f"诊断: {diagnosis}")
```

**Cell 3**:
```python
# 计算BMI
weight = 70  # kg
height = 1.75  # m
bmi = weight / (height ** 2)

print(f"身高: {height}m")
print(f"体重: {weight}kg")
print(f"BMI: {bmi:.2f}")

if bmi < 18.5:
    print("体重过低")
elif bmi < 24:
    print("体重正常")
elif bmi < 28:
    print("超重")
else:
    print("肥胖")
```

#### 保存笔记本

点击菜单 **File** → **Save and Checkpoint**
或按 `Ctrl + S` (Windows/Linux) 或 `Cmd + S` (macOS)

### 方式3: 脚本文件(.py文件)

#### 创建Python文件

1. 打开文本编辑器(记事本、VSCode、Sublime等)
2. 新建文件,命名为 `hello_medical.py`

#### 编写代码

```python
# hello_medical.py
# 我的第一个Python脚本

print("="*60)
print("欢迎使用医学数据处理系统")
print("="*60)

# 患者信息
patient_name = "张三"
age = 45
weight = 70
height = 1.75

# 计算BMI
bmi = weight / (height ** 2)

# 显示信息
print(f"\n患者信息:")
print(f"  姓名: {patient_name}")
print(f"  年龄: {age}岁")
print(f"  身高: {height}m")
print(f"  体重: {weight}kg")
print(f"  BMI: {bmi:.2f}")

# BMI分类
if bmi < 18.5:
    category = "体重过低"
elif bmi < 24:
    category = "体重正常"
elif bmi < 28:
    category = "超重"
else:
    category = "肥胖"

print(f"  分类: {category}")
print("="*60)
```

#### 运行脚本

```bash
# 方法1: 直接运行
python hello_medical.py

# 方法2: 指定Python版本
python3 hello_medical.py
```

**输出**:
```
============================================================
欢迎使用医学数据处理系统
============================================================

患者信息:
  姓名: 张三
  年龄: 45岁
  身高: 1.75m
  体重: 70kg
  BMI: 22.86
  分类: 体重正常
============================================================
```

**优点**: 可以重复运行,便于分享
**缺点**: 不如Jupyter直观

## Python语法基础

### 1. 注释

```python
# 这是单行注释(井号开头)

# 注释会被Python忽略
# 用于解释代码的作用

"""
这是多行注释
可以写很多行
通常用于函数或模块的说明文档
"""

'''
也可以用单引号
效果一样
'''

# 医学场景示例
blood_glucose = 7.2  # 空腹血糖(mmol/L)
```

### 2. 变量命名规则

#### 合法的变量名

```python
# 推荐(小写+下划线)
patient_name = "张三"
blood_pressure = 140
is_diabetic = True

# 也可以(驼峰命名)
patientName = "张三"
bloodPressure = 140

# 数字可以在中间或结尾
patient1 = "张三"
patient_2 = "李四"
```

#### 非法的变量名

```python
# ❌ 不能以数字开头
1patient = "张三"  # SyntaxError

# ❌ 不能包含特殊字符
patient-name = "张三"  # SyntaxError
patient@name = "张三"  # SyntaxError

# ❌ 不能使用Python关键字
if = 10  # SyntaxError
for = 20  # SyntaxError
class = "内科"  # SyntaxError
```

#### 查看所有关键字

```python
import keyword
print(keyword.kwlist)
```

输出:
```python
['False', 'None', 'True', 'and', 'as', 'assert', 'async', 'await',
 'break', 'class', 'continue', 'def', 'del', 'elif', 'else', 'except',
 'finally', 'for', 'from', 'global', 'if', 'import', 'in', 'is',
 'lambda', 'nonlocal', 'not', 'or', 'pass', 'raise', 'return', 'try',
 'while', 'with', 'yield']
```

### 3. 缩进:Python的特色

**Python用缩进表示代码块,而不是花括号!**

#### 正确的缩进

```python
# if语句需要缩进
age = 70
if age >= 65:
    print("老年患者")  # 4个空格缩进
    print("用药需谨慎")  # 保持一致的缩进

# 函数定义需要缩进
def calculate_bmi(weight, height):
    bmi = weight / (height ** 2)  # 4个空格
    return bmi

# 循环需要缩进
for i in range(3):
    print(f"第{i+1}次测量")  # 4个空格
```

#### 错误的缩进

```python
# ❌ 缩进不一致
if age >= 65:
    print("老年患者")  # 4个空格
      print("用药需谨慎")  # 6个空格 - IndentationError!

# ❌ 应该缩进但没有缩进
if age >= 65:
print("老年患者")  # IndentationError!

# ❌ 不应该缩进却缩进了
    print("Hello")  # IndentationError!
```

**建议**: 统一使用4个空格缩进(Jupyter和大多数编辑器会自动处理)

### 4. 输出:print()函数

```python
# 基本输出
print("Hello")

# 输出多个值(用逗号分隔)
print("患者:", "张三", "年龄:", 45)
# 输出: 患者: 张三 年龄: 45

# 不换行输出
print("血压:", end=" ")
print("140/90 mmHg")
# 输出: 血压: 140/90 mmHg

# 自定义分隔符
print("张三", "李四", "王五", sep=" | ")
# 输出: 张三 | 李四 | 王五

# 格式化输出
name = "张三"
age = 45
print(f"患者{name}，年龄{age}岁")  # f-string(推荐)
print("患者{}，年龄{}岁".format(name, age))  # format方法
print("患者%s，年龄%d岁" % (name, age))  # %格式化(老式)

# 格式化数字
bmi = 22.86456
print(f"BMI: {bmi:.2f}")  # 保留2位小数: 22.86
print(f"BMI: {bmi:.1f}")  # 保留1位小数: 22.9
```

### 5. 输入:input()函数

```python
# 获取用户输入
name = input("请输入患者姓名: ")
print(f"您好，{name}!")

# 注意:input()返回的是字符串!
age_str = input("请输入年龄: ")
age = int(age_str)  # 转换为整数
print(f"明年您{age + 1}岁")

# 一步到位
weight = float(input("请输入体重(kg): "))
height = float(input("请输入身高(m): "))
bmi = weight / (height ** 2)
print(f"您的BMI是: {bmi:.2f}")
```

**运行示例**:
```
请输入患者姓名: 张三
您好，张三!
请输入年龄: 45
明年您46岁
请输入体重(kg): 70
请输入身高(m): 1.75
您的BMI是: 22.86
```

## 完整示例:交互式BMI计算器

### 版本1: 基础版

```python
# bmi_calculator.py

print("="*50)
print("BMI计算器")
print("="*50)

# 获取输入
name = input("请输入姓名: ")
weight = float(input("请输入体重(kg): "))
height = float(input("请输入身高(m): "))

# 计算BMI
bmi = weight / (height ** 2)

# 判断分类
if bmi < 18.5:
    category = "体重过低"
    advice = "建议增加营养"
elif bmi < 24:
    category = "体重正常"
    advice = "保持健康生活方式"
elif bmi < 28:
    category = "超重"
    advice = "建议控制饮食,增加运动"
else:
    category = "肥胖"
    advice = "建议就医咨询"

# 输出结果
print("\n" + "="*50)
print("BMI评估报告")
print("="*50)
print(f"姓名: {name}")
print(f"身高: {height}m")
print(f"体重: {weight}kg")
print(f"BMI: {bmi:.2f}")
print(f"分类: {category}")
print(f"建议: {advice}")
print("="*50)
```

### 版本2: 函数封装版

```python
# bmi_calculator_v2.py

def calculate_bmi(weight, height):
    """计算BMI"""
    return weight / (height ** 2)

def classify_bmi(bmi):
    """BMI分类"""
    if bmi < 18.5:
        return "体重过低", "建议增加营养"
    elif bmi < 24:
        return "体重正常", "保持健康生活方式"
    elif bmi < 28:
        return "超重", "建议控制饮食,增加运动"
    else:
        return "肥胖", "建议就医咨询"

def print_report(name, weight, height, bmi, category, advice):
    """打印报告"""
    print("\n" + "="*50)
    print("BMI评估报告")
    print("="*50)
    print(f"姓名: {name}")
    print(f"身高: {height}m")
    print(f"体重: {weight}kg")
    print(f"BMI: {bmi:.2f}")
    print(f"分类: {category}")
    print(f"建议: {advice}")
    print("="*50)

def main():
    """主程序"""
    print("="*50)
    print("BMI计算器 v2.0")
    print("="*50)

    # 获取输入
    name = input("请输入姓名: ")
    weight = float(input("请输入体重(kg): "))
    height = float(input("请输入身高(m): "))

    # 计算和分类
    bmi = calculate_bmi(weight, height)
    category, advice = classify_bmi(bmi)

    # 显示报告
    print_report(name, weight, height, bmi, category, advice)

# 运行主程序
if __name__ == "__main__":
    main()
```

### 版本3: 批量处理版

```python
# bmi_batch.py

def calculate_bmi(weight, height):
    """计算BMI"""
    return weight / (height ** 2)

def classify_bmi(bmi):
    """BMI分类"""
    if bmi < 18.5:
        return "体重过低"
    elif bmi < 24:
        return "体重正常"
    elif bmi < 28:
        return "超重"
    else:
        return "肥胖"

# 患者列表
patients = [
    {"name": "张三", "weight": 70, "height": 1.75},
    {"name": "李四", "weight": 85, "height": 1.68},
    {"name": "王五", "weight": 55, "height": 1.62},
    {"name": "赵六", "weight": 92, "height": 1.80},
]

print("="*70)
print("批量BMI评估报告")
print("="*70)
print(f"{'姓名':<10} {'身高(m)':<10} {'体重(kg)':<10} {'BMI':<10} {'分类':<10}")
print("-"*70)

for patient in patients:
    name = patient["name"]
    weight = patient["weight"]
    height = patient["height"]

    bmi = calculate_bmi(weight, height)
    category = classify_bmi(bmi)

    print(f"{name:<10} {height:<10} {weight:<10} {bmi:<10.2f} {category:<10}")

print("="*70)
```

**输出**:
```
======================================================================
批量BMI评估报告
======================================================================
姓名         身高(m)      体重(kg)     BMI        分类
----------------------------------------------------------------------
张三         1.75       70         22.86      体重正常
李四         1.68       85         30.12      肥胖
王五         1.62       55         20.96      体重正常
赵六         1.8        92         28.40      肥胖
======================================================================
```

## Python代码规范(PEP 8)

### 为什么需要代码规范?

```python
# ❌ 难以阅读的代码
def f(w,h):return w/(h**2)
x=f(70,1.75)
print(x)

# ✅ 规范的代码
def calculate_bmi(weight, height):
    """计算BMI值"""
    bmi = weight / (height ** 2)
    return bmi

bmi = calculate_bmi(70, 1.75)
print(f"BMI: {bmi:.2f}")
```

### 基本规范

1. **缩进**: 4个空格
2. **行长度**: 不超过79个字符
3. **空行**:
   - 函数之间: 2个空行
   - 类之间: 2个空行
   - 函数内逻辑块: 1个空行
4. **空格**:
   - 运算符两侧: `a = b + c` ✅
   - 函数参数逗号后: `func(a, b, c)` ✅
5. **命名**:
   - 变量/函数: 小写+下划线 `patient_name`
   - 常量: 大写+下划线 `MAX_PATIENTS = 100`
   - 类: 驼峰命名 `PatientRecord`

### 示例

```python
"""
bmi_calculator.py
BMI计算器模块

提供BMI计算和分类功能
"""

# 常量定义
BMI_UNDERWEIGHT = 18.5
BMI_NORMAL = 24
BMI_OVERWEIGHT = 28


def calculate_bmi(weight, height):
    """
    计算BMI值

    参数:
        weight (float): 体重(kg)
        height (float): 身高(m)

    返回:
        float: BMI值
    """
    bmi = weight / (height ** 2)
    return round(bmi, 2)


def classify_bmi(bmi):
    """
    BMI分类

    参数:
        bmi (float): BMI值

    返回:
        str: 分类结果
    """
    if bmi < BMI_UNDERWEIGHT:
        return "体重过低"
    elif bmi < BMI_NORMAL:
        return "体重正常"
    elif bmi < BMI_OVERWEIGHT:
        return "超重"
    else:
        return "肥胖"


def main():
    """主程序"""
    print("BMI计算器")

    weight = float(input("体重(kg): "))
    height = float(input("身高(m): "))

    bmi = calculate_bmi(weight, height)
    category = classify_bmi(bmi)

    print(f"BMI: {bmi}")
    print(f"分类: {category}")


if __name__ == "__main__":
    main()
```

## 💡 关键要点

### 运行Python的方式

| 方式 | 适用场景 | 优缺点 |
|------|---------|--------|
| **交互式** | 快速测试 | 不能保存 |
| **Jupyter** | 学习、数据分析 | 直观,适合探索 ✅ |
| **脚本(.py)** | 正式项目 | 可复用,便于分享 ✅ |

### Python语法要点

1. **缩进很重要** - 用4个空格
2. **注释帮助理解** - `#` 单行注释
3. **变量命名规范** - 小写+下划线
4. **print输出** - `print()`
5. **input输入** - `input()` 返回字符串

### 第一个程序的意义

```
Hello World → 验证环境正常
Hello Medical World → 开启医学编程之旅!
```

## 下一步

编写了第一个程序后,下一节[Python基础语法速成](3.4-basic-syntax.md)将系统学习Python语法!

---

## 🎯 实践任务

### 任务1: 体温转换器

编写程序,将摄氏度转换为华氏度。

公式: `F = C × 9/5 + 32`

```python
# your_code.py
celsius = float(input("请输入体温(℃): "))
fahrenheit = # 你的代码
print(f"{celsius}℃ = {fahrenheit}°F")
```

### 任务2: 药物剂量计算器

根据体重计算药物剂量。

```python
# drug_dose.py
weight = float(input("请输入体重(kg): "))
dose_per_kg = 5  # 每公斤5mg

total_dose = # 你的代码
print(f"推荐剂量: {total_dose}mg")
```

### 任务3: 完整的患者登记系统

```python
# patient_register.py
print("患者登记系统")
print("="*50)

name = input("姓名: ")
age = int(input("年龄: "))
gender = input("性别(男/女): ")
diagnosis = input("初步诊断: ")

# 生成病历号
patient_id = f"P-{age:02d}-001"  # 例如: P-45-001

print("\n" + "="*50)
print("登记成功!")
print(f"病历号: {patient_id}")
print(f"患者: {name}, {gender}, {age}岁")
print(f"诊断: {diagnosis}")
print("="*50)
```

试着运行并保存这些程序!

> 💡 提示:不要害怕出错,报错是学习的一部分!

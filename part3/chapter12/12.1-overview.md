# 12.1 医学图像处理概述

## 医学图像处理的应用场景

### 常见需求

```
1. DICOM文件处理
   - 读取CT/MRI图像
   - 调整窗宽窗位
   - 测量距离/面积

2. 图像预处理
   - 去噪
   - 增强对比度
   - 标准化

3. 自动分割
   - 肿瘤区域
   - 器官轮廓
   - 病灶检测

4. 图像标注
   - 批量标注
   - 格式转换
   - 质控检查
```

## Python医学图像处理库

| 库 | 用途 | 难度 |
|---|------|------|
| **pydicom** | 读取DICOM | ⭐⭐ |
| **SimpleITK** | 医学图像处理 | ⭐⭐⭐ |
| **OpenCV** | 通用图像处理 | ⭐⭐ |
| **PIL/Pillow** | 基础图像操作 | ⭐ |
| **scikit-image** | 图像算法 | ⭐⭐ |

## 本章学习路径

```
12.1 概述 (本节)
  ↓
12.2 DICOM文件处理
  ↓
12.3 图像预处理与增强
  ↓
12.4 图像分割与测量
  ↓
12.5 批量处理与自动化
  ↓
12.6 完整案例:CT影像分析工具
```

## 快速示例

### 读取显示DICOM

```python
import pydicom
import matplotlib.pyplot as plt

# 读取DICOM文件
ds = pydicom.dcmread('ct_image.dcm')

# 获取图像数据
image = ds.pixel_array

# 显示
plt.imshow(image, cmap='gray')
plt.title('CT Image')
plt.show()
```

### 调整窗宽窗位

```python
def apply_window(image, window_center, window_width):
    """调整窗宽窗位"""
    img_min = window_center - window_width // 2
    img_max = window_center + window_width // 2

    image = np.clip(image, img_min, img_max)
    image = ((image - img_min) / (img_max - img_min) * 255).astype(np.uint8)

    return image

# 肺窗: WL=-600, WW=1500
lung_window = apply_window(image, -600, 1500)

# 纵隔窗: WL=40, WW=400
mediastinal_window = apply_window(image, 40, 400)
```

## 实际应用价值

**案例**: 放射科医生使用AI辅助工具

**使用前**:
- 手工测量肿瘤: 每例5分钟
- 调整窗宽窗位: 反复尝试
- 批量处理: 不可能

**使用后**:
- 自动测量: 1秒
- 预设窗位: 一键切换
- 批量处理: 100例/分钟

**效率提升: 50倍+**

## 安装依赖

```bash
pip install pydicom pillow opencv-python numpy matplotlib scikit-image SimpleITK
```

## 下一步

[12.2 DICOM文件处理](12.2-dicom.md) - 深入学习DICOM操作

[12.3 图像预处理](12.3-preprocessing.md) - 图像增强技术

[12.4 图像分割](12.4-segmentation.md) - 自动分割方法

[12.5 批量处理](12.5-batch-processing.md) - 提高效率

[12.6 完整案例](12.6-complete-case.md) - CT影像分析工具

# 11.7 å®Œæ•´ç—…ä¾‹ç®¡ç†ç³»ç»Ÿ

## ç³»ç»Ÿæ¶æ„

```
ç—…ä¾‹ç®¡ç†ç³»ç»Ÿ
â”œâ”€â”€ æ•°æ®å±‚ (SQLite)
â”‚   â”œâ”€â”€ patients (æ‚£è€…)
â”‚   â”œâ”€â”€ visits (å°±è¯Š)
â”‚   â””â”€â”€ followups (éšè®¿)
â”œâ”€â”€ ä¸šåŠ¡å±‚ (Python)
â”‚   â”œâ”€â”€ database.py (æ•°æ®åº“æ“ä½œ)
â”‚   â””â”€â”€ utils.py (å·¥å…·å‡½æ•°)
â””â”€â”€ ç•Œé¢å±‚ (Streamlit)
    â”œâ”€â”€ patient_entry.py (å½•å…¥)
    â”œâ”€â”€ patient_search.py (æ£€ç´¢)
    â”œâ”€â”€ followup_manager.py (éšè®¿)
    â””â”€â”€ statistics.py (ç»Ÿè®¡)
```

## æ•´åˆä¸»ç¨‹åº

**main.py**:

```python
"""
ç—…ä¾‹ç®¡ç†ç³»ç»Ÿ - ä¸»ç¨‹åº
"""

import streamlit as st
from pathlib import Path

# é¡µé¢é…ç½®
st.set_page_config(
    page_title="ç—…ä¾‹ç®¡ç†ç³»ç»Ÿ",
    page_icon="ğŸ¥",
    layout="wide",
    initial_sidebar_state="expanded"
)

def main():
    # ä¾§è¾¹æ å¯¼èˆª
    st.sidebar.title("ğŸ¥ ç—…ä¾‹ç®¡ç†ç³»ç»Ÿ")
    st.sidebar.markdown("---")

    page = st.sidebar.radio(
        "åŠŸèƒ½æ¨¡å—",
        [
            "ğŸ  é¦–é¡µ",
            "ğŸ“ ç—…ä¾‹å½•å…¥",
            "ğŸ” æ‚£è€…æ£€ç´¢",
            "ğŸ“… éšè®¿ç®¡ç†",
            "ğŸ“Š ç»Ÿè®¡åˆ†æ",
            "âš™ï¸ ç³»ç»Ÿè®¾ç½®"
        ]
    )

    # è·¯ç”±
    if page == "ğŸ  é¦–é¡µ":
        show_home()
    elif page == "ğŸ“ ç—…ä¾‹å½•å…¥":
        from patient_entry import main as entry_main
        entry_main()
    elif page == "ğŸ” æ‚£è€…æ£€ç´¢":
        from patient_search import main as search_main
        search_main()
    elif page == "ğŸ“… éšè®¿ç®¡ç†":
        from followup_manager import main as followup_main
        followup_main()
    elif page == "ğŸ“Š ç»Ÿè®¡åˆ†æ":
        from statistics import show_statistics
        show_statistics()
    elif page == "âš™ï¸ ç³»ç»Ÿè®¾ç½®":
        show_settings()

def show_home():
    """é¦–é¡µ"""
    st.title("æ¬¢è¿ä½¿ç”¨ç—…ä¾‹ç®¡ç†ç³»ç»Ÿ")

    st.markdown("""
    ## ğŸ¯ ç³»ç»ŸåŠŸèƒ½

    ### ğŸ“ ç—…ä¾‹å½•å…¥
    - å¿«é€Ÿå½•å…¥æ‚£è€…ä¿¡æ¯
    - è®°å½•å°±è¯Šè¯¦æƒ…
    - è‡ªåŠ¨ç”Ÿæˆæ‚£è€…ID

    ### ğŸ” æ‚£è€…æ£€ç´¢
    - å¿«é€Ÿæ£€ç´¢
    - é«˜çº§å¤šæ¡ä»¶æŸ¥è¯¢
    - æŸ¥çœ‹å†å²è®°å½•

    ### ğŸ“… éšè®¿ç®¡ç†
    - è‡ªåŠ¨æé†’
    - æ ‡è®°å®Œæˆ
    - ç»Ÿè®¡åˆ†æ

    ### ğŸ“Š æ•°æ®ç»Ÿè®¡
    - æ‚£è€…æ„æˆåˆ†æ
    - ç–¾ç—…åˆ†å¸ƒ
    - è¶‹åŠ¿å›¾è¡¨
    """)

    # å¿«é€Ÿç»Ÿè®¡
    from database import PatientDB
    db = PatientDB()

    col1, col2, col3, col4 = st.columns(4)

    with col1:
        cursor = db.conn.cursor()
        cursor.execute("SELECT COUNT(*) FROM patients")
        st.metric("æ€»æ‚£è€…æ•°", cursor.fetchone()[0])

    with col2:
        cursor.execute("SELECT COUNT(*) FROM visits")
        st.metric("å°±è¯Šè®°å½•", cursor.fetchone()[0])

    with col3:
        cursor.execute("""
            SELECT COUNT(*) FROM followups
            WHERE status = 'å¾…éšè®¿'
        """)
        st.metric("å¾…éšè®¿", cursor.fetchone()[0])

    with col4:
        cursor.execute("""
            SELECT COUNT(*) FROM followups
            WHERE status = 'å¾…éšè®¿'
              AND followup_date < date('now')
        """)
        overdue = cursor.fetchone()[0]
        st.metric("é€¾æœŸ", overdue, delta=f"-{overdue}" if overdue > 0 else "0")

    db.close()

def show_settings():
    """ç³»ç»Ÿè®¾ç½®"""
    st.title("âš™ï¸ ç³»ç»Ÿè®¾ç½®")

    st.subheader("æ•°æ®åº“ç®¡ç†")

    col1, col2 = st.columns(2)

    with col1:
        if st.button("ğŸ“¤ å¯¼å‡ºæ•°æ®åº“"):
            st.success("æ•°æ®åº“å·²å¯¼å‡º")

    with col2:
        if st.button("ğŸ“¥ å¯¼å…¥æ•°æ®åº“"):
            st.info("åŠŸèƒ½å¼€å‘ä¸­")

    st.markdown("---")
    st.subheader("å…³äº")
    st.info("""
    **ç—…ä¾‹ç®¡ç†ç³»ç»Ÿ v1.0**

    å¼€å‘: AIè¾…åŠ©ç¼–ç¨‹
    æŠ€æœ¯æ ˆ: Python + Streamlit + SQLite
    """)

if __name__ == "__main__":
    main()
```

## è¿è¡Œç³»ç»Ÿ

```bash
# å®‰è£…ä¾èµ–
pip install streamlit pandas openpyxl matplotlib

# å¯åŠ¨ç³»ç»Ÿ
streamlit run main.py
```

## éƒ¨ç½²å»ºè®®

### 1. æœ¬åœ°ä½¿ç”¨

```bash
# ç›´æ¥è¿è¡Œ
streamlit run main.py
```

### 2. å±€åŸŸç½‘å…±äº«

```bash
# å…è®¸å¤–éƒ¨è®¿é—®
streamlit run main.py --server.address=0.0.0.0
```

å…¶ä»–ç”µè„‘è®¿é—®: `http://ä½ çš„IP:8501`

### 3. äº‘ç«¯éƒ¨ç½²

ä½¿ç”¨Streamlit Cloud(å…è´¹):
1. å°†ä»£ç æ¨é€åˆ°GitHub
2. è®¿é—® share.streamlit.io
3. è¿æ¥GitHubä»“åº“
4. ä¸€é”®éƒ¨ç½²

## æ•ˆç‡å¯¹æ¯”

| ä»»åŠ¡ | ä¼ ç»Ÿæ–¹å¼ | æœ¬ç³»ç»Ÿ | æå‡ |
|-----|---------|--------|------|
| å½•å…¥1ä½æ‚£è€… | 5åˆ†é’Ÿ | 2åˆ†é’Ÿ | 2.5å€ |
| æŸ¥æ‰¾ç—…å† | 10åˆ†é’Ÿ | 10ç§’ | 60å€ |
| æœˆåº¦ç»Ÿè®¡ | 4å°æ—¶ | 1åˆ†é’Ÿ | 240å€ |
| éšè®¿ç®¡ç† | æ‰‹å·¥è®°å½• | è‡ªåŠ¨æé†’ | âˆ |

## æ­å–œ!

å®Œæˆç¬¬11ç« ,ä½ å·²ç»æŒæ¡:
âœ… SQLiteæ•°æ®åº“
âœ… Streamlit Webå¼€å‘
âœ… å®Œæ•´ç³»ç»Ÿæ¶æ„
âœ… å®ç”¨åŒ»ç–—å·¥å…·

## ä¸‹ä¸€ç« é¢„å‘Š

[ç¬¬12ç«  åŒ»å­¦å›¾åƒå¤„ç†](../chapter12/12.1-overview.md) - AIè¾…åŠ©åŒ»å­¦å›¾åƒåˆ†æ

# 13.1 科研数据可视化概述

## 为什么可视化很重要?

**一图胜千言**

```
纯数字:
- A组: 145.2±12.5 mmHg
- B组: 130.8±11.3 mmHg
- P < 0.001

可视化:
- 一目了然看出差异
- 发现数据模式和趋势
- 论文更有说服力
```

## 医学论文常用图表

### 必备图表类型

| 图表 | 用途 | 工具 |
|-----|------|------|
| **柱状图** | 组间对比 | matplotlib, seaborn |
| **箱线图** | 分布对比 | seaborn |
| **散点图** | 相关性 | matplotlib |
| **折线图** | 趋势变化 | matplotlib |
| **热图** | 相关矩阵 | seaborn |
| **生存曲线** | 生存分析 | lifelines |
| **森林图** | Meta分析 | matplotlib |
| **ROC曲线** | 诊断性能 | scikit-learn |

## Python可视化库

| 库 | 特点 | 难度 | 推荐场景 |
|---|------|------|---------|
| **Matplotlib** | 基础强大 | ⭐⭐⭐ | 所有图表 |
| **Seaborn** | 美观统计 | ⭐⭐ | 统计图表 |
| **Plotly** | 交互式 | ⭐⭐ | 展示汇报 |
| **Pandas** | 快速绘图 | ⭐ | 探索性分析 |

## 本章学习路径

```
13.1 概述 (本节)
  ↓
13.2 Matplotlib基础
  ↓
13.3 Seaborn统计图表
  ↓
13.4 论文级图表制作
  ↓
13.5 交互式可视化
  ↓
13.6 完整案例:临床试验数据可视化
```

## 快速示例

### 简单柱状图

```python
import matplotlib.pyplot as plt
import numpy as np

# 数据
groups = ['A药', 'B药']
values = [15.2, 10.8]
errors = [3.5, 3.2]

# 绘图
plt.bar(groups, values, yerr=errors, capsize=5)
plt.ylabel('血压下降值 (mmHg)')
plt.title('两组降压效果对比')
plt.savefig('comparison.png', dpi=300, bbox_inches='tight')
plt.show()
```

### 散点图+回归线

```python
import seaborn as sns
import pandas as pd

# 数据
df = pd.DataFrame({
    '年龄': np.random.normal(50, 10, 100),
    '血压': np.random.normal(140, 15, 100)
})

# 绘图
sns.regplot(data=df, x='年龄', y='血压')
plt.title('年龄与血压的关系')
plt.savefig('correlation.png', dpi=300)
plt.show()
```

## 论文图表要求

### 一般期刊要求

```
✅ 分辨率: 300 DPI以上
✅ 格式: TIFF, PNG, PDF
✅ 尺寸: 单栏89mm, 双栏183mm
✅ 字体: Arial, Times New Roman
✅ 线条: 清晰,粗细适中
✅ 颜色: 黑白打印友好
```

### 设置模板

```python
# 论文级设置
plt.rcParams['figure.dpi'] = 300
plt.rcParams['font.size'] = 12
plt.rcParams['font.family'] = 'Arial'
plt.rcParams['axes.linewidth'] = 1.5
plt.rcParams['xtick.major.width'] = 1.5
plt.rcParams['ytick.major.width'] = 1.5
```

## 用AI生成可视化代码

**Prompt模板**:
```
我有临床试验数据,需要制作论文级图表:

数据:
- A组(n=50): 血压下降15.2±3.5 mmHg
- B组(n=50): 血压下降10.8±3.2 mmHg

需求:
1. 柱状图对比两组
2. 误差棒显示标准差
3. 标注P值
4. 300 DPI
5. 黑白打印友好

请生成Python代码。
```

AI会生成完整的绘图代码,包括:
- 数据准备
- 绘图设置
- 样式调整
- 保存高清图片

## 实际应用价值

**案例**: 医学研究生制作论文图表

**使用前**:
- Excel制图: 2小时/图
- 调整格式: 反复尝试
- 不符合期刊要求: 返工

**使用后**:
- Python一键生成: 5分钟/图
- 格式标准: 符合要求
- 批量生成: 10图/10分钟

**效率提升: 20倍+**

## 安装依赖

```bash
pip install matplotlib seaborn pandas numpy scipy scikit-learn lifelines
```

## 下一步

[13.2 Matplotlib基础](13.2-matplotlib.md) - 掌握基础绘图

[13.3 Seaborn统计图](13.3-seaborn.md) - 美观的统计图表

[13.4 论文级图表](13.4-publication-quality.md) - 符合期刊要求

[13.5 交互式可视化](13.5-interactive.md) - Plotly交互图表

[13.6 完整案例](13.6-complete-case.md) - 临床试验可视化
